<!DOCTYPE HTML>
<!--
	Strongly Typed by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Pebble App Development - Andy Villasmil</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
	</head>
	<body class="left-sidebar is-preload">
		<div id="page-wrapper">

			<!-- Header -->
			<section id="header">
				<div class="container">
					<!-- Logo -->
					<h1 id="logo"><a href="../index.html">Andy Villasmil</a></h1>
					<p>Just a guy who knows what he's doing, until someone else does.</p>

					<!-- Nav -->
					<nav id="nav">
						<ul>
							<li><a class="icon solid fa-home" href="../index.html"><span>Home</span></a></li>
							<li><a class="icon solid fa-user" href="../index.html#main"><span>About Me</span></a></li>
							<li>
								<a href="../index.html#features" class="icon solid fa-code"><span>Portfolio</span></a>
								<ul>
									<li><a href="pebble.html#main">Pebble App Development</a></li>
									<li><a href="nogs.html#main">NoGS VPN Checker</a></li>
									<li><a href="college_marketplace.html#main">College Marketplace</a></li>
									<li><a href="lunar_golf.html#main">Lunar Golf VR</a></li>
								</ul>
							</li>
							<li><a class="icon solid fa-envelope" href="#footer"><span>Contact</span></a></li>
						</ul>
					</nav>
				</div>
			</section>

			<!-- Main -->
				<section id="main">
					<div class="container">
						<div class="row">
							<!-- Content -->
								<div id="content" class="col-8 col-12-medium">


									<!-- Post -->
										<article class="box post">
											<header>
												<h2><strong>Koishi - Japanese Kana Flashcards</strong></h2>
											</header>
											<h3>What is it?</h3>
											<p>
												At the start of 2023, I was beginning to prepare for a semester abroad in Japan. Part of the preparation process was learning some basic Japanese, particularly the phonetic character sets Hiragana and Katakana. There are quite a few kana to learn and one great way of studying is by using flashcards. I used several flashcard apps on my phone or online to help me study, but I realized it would be great if I could have my flashcards on my watch. It’s a good excuse to make another Pebble app, so I decided to make it.
												<br>
												<br>
												The final product is called Koshi, which is pebble or small rock in Japanese. The app allows you to create decks of up to 100 cards consisting of all the Hiragana and Katakana characters (208 characters in total). It is fully customizable, allowing you to select how many cards you want in a deck and which specific kana you want to be able to appear. Additionally, there are deck presets that allow you to load common configurations of kana to study. It ended up being a lot more challenging to make than I had originally expected, but I’m happy with how it turned out.
												<br>
												<br>
												You can check it out <a href="https://apps.rebble.io/en_US/application/64177b1e419fd9053e31a7b5?native=false&query=Pok%2525C3%2525A9mon&section=watchfaces" target="_blank">here</a> or on the download section on this page. If you have a Pebble and want to download the app for yourself, you can do so by opening the Pebble app on your phone and searching “Koishi” on the app store. There are some other apps with the same name, so make sure you get the one with the hiragana “a” symbol as the icon. It’s available for all Pebble models, so feel free to use it as an excuse to start learning some Japanese!
											</p>
											<h3>How?</h3>
											<p>
												I had a few goals with this app. First, I wanted it to be available on all Pebble models. My last project for Pebble was limited to the “Time” series because of their color displays. However, that wasn’t the case this time and I wanted to see if I could make it happen. Second, I wanted to have a simple interface for the flashcard system. Some flashcards apps allow you to check off whether you got a flashcard right and have complex algorithms to try to determine which cards are the best to show you. I wanted to bypass all that and create a basic flashcard game. Not only does this make development easier, but I personally prefer it to more complicated alternatives. Lastly, I wanted the ability to customize which kana appear. Throughout my study, one annoyance I kept running into was apps giving you flashcards for the entire set of characters and not allowing you to choose what to study. It can be quite annoying when you are learning them bit by bit and just want to study a small group of them. So having this functionality was crucial. With my goals in mind, I got started.
												<br>
												<br>
												Since my previous experience developing for Pebble was making a watchface, I had a lot to figure out in terms of making a watch app. They are quite different in what they achieve and have unique implementations. My first major goal was to get the entire menu tree implemented. My idea was that if I had the menu, I could add each component of the app window by window until it was complete. Figuring out how to get the menu setup was a bit tricky however. The Pebble documentation can be all over the place at times due to Pebble no longer being around and many of the example links being broken. However, after searching, I finally found an <a href="https://github.com/pebble-examples/ui-patterns" target="_blank">example project</a> that helped me understand how menus are implemented. After a good bit of trial and error, I got a good understanding of how it worked and got the menu framework in.
												<br>
												<br>
												From there, my next goal was to set up all the data needed for deck customization. In my experience, making sure your data is structured in a sensible and smart way can be the key to a cohesive program (coding wise at least). If your data is unorganized and not tailored for your needs, it can be particularly difficult to parse it. With that in mind, I took some time to design out how I intended my data structure to work with the rest of the app. Essentially, I was going to have two boolean arrays that stored which groups of hiragana and katakana characters you wanted to study. With that data, I would then have code that would take those arrays and create a struct that represented a card. I would then use all the created cards, shuffle them and create a struct that represented a deck of flashcards with all the selected cards within. I implemented the selection arrays and linked it to the UI and had a working selectable menu. At that time, I also implemented the preset system which just manually sets the values in the selection arrays based on what the user selected. Finally, I implemented the ability to select the amount of cards within a deck. I added this out of caution for hardware limitation, which I’ll touch on some more later.
												<br>
												<br>
												Before I could move onto creating the actual deck and card navigation system, I need to make sure that all that data that was just set by the user is saved between sessions. It’s not very useful if the user has to manually set their preferred configuration each time they open the app. I took advantage of the <a href="https://developer.rebble.io/developer.pebble.com/guides/events-and-services/persistent-storage/index.html" target="_blank">persistent storage</a> API, which allows you to store data on the watch itself. While I did store some variables in their primitive form, most things I put into a struct first before storing which made things easier to work with.
												<br>
												<br>
												With all my data figured out, I could finally start on the actual deck and flashcard system. I first wanted to establish a working layout before I got to generating the cards. A Pebble watch has 4 buttons, one back button on the left side of the watch and then an up, center, and down button on the right. The right side buttons are commonly used for navigation, and that would be no different here. My idea was you would use the up and down button to move backwards and forwards through the deck respectively and then the center button to “flip” the card and show the answer. Accessing the button presses is easy, and by using a placeholder image, I was able to move through the deck. An extra detail I added was the Action Bar on the right side of the screen. It’s a small guide as to what each button does and helps make the app easier to understand and use. The Action Bar is a <a href="https://developer.rebble.io/developer.pebble.com/docs/c/User_Interface/Layers/ActionBarLayer/index.html" target="_blank">built-in feature</a> in the Pebble SDK. The tradeoff is that it makes your usable area smaller since the right side of the display is used for the bar. This is where the difference between the square and round displays started to become more apparent and I needed to tweak the layout to best account for both. Lastly, I added the status bar at the top which shows the time. This is another built-in feature that is recommended to be used whenever your app is designed for extended use. You don’t want to lose the core functionality of a watch after all.
												<br>
												<br>
												The next step is where I hit my first of two roadblocks. One big issue with an app like this is that the Pebble watch does not natively support any non-latin characters. This means, if you try to display Japanese text on a Pebble, it will just show empty boxes. There are 3rd party language packs that can be downloaded that allow the watch to show non-supported characters, however I didn’t want to require the user to download anything, so I could not rely on that. The next best solution was to use images. I could simply load an image for each kana and then display it when needed. This solution works in theory but has two major issues to overcome. First, finding a set of consistent, semi-low resolution kana images proved to be difficult. Most images online are either massive charts instead of individual characters, or have a limited set of characters. The few complete sets I could find either did not look good when scaled down or had overly stylized fonts that wouldn’t work for my purposes. The second, and arguably bigger issue, is hardware limitations. As mentioned, one of my goals is to be compatible with all models of Pebble. Later Pebble models got more processing power, memory and storage which makes developing for them much easier. However, the original Pebble, also known as Aplite, had much lower specs. The one I was concerned about was the 128KB limit for resources, including images. There are a total of 208 hiragana and katakana, which means each kana image had to be about 600 bytes or less. For these reasons, I knew I had to make all the kana images by hand to meet my needs. My goal first and foremost was to find a balance between quality and size that would meet my byte limit. Initially, I was getting files that were over 1000 bytes, however with a lot of trial and error in adjusting the image size, color depth (in this case transparency rather than color since it was black and white to begin with) and using online compression tools, I was able to get the files anywhere between 400-600 bytes. 
												<br>
												<br>
												Once I had figured out how to best make the images, I then had to take the time to actually make them all. It was quite a long process and it took many hours to create, export, compress and then load all the images. Once I loaded them all however, I ran into my second roadblock. After all that work, ensuring that the files were small enough (they totaled around 75KB in the end), they ended up being too large and the compiler threw an error. I was devastated, but knew there had to be a solution, I had to be missing something.I looked all over the documentation trying to figure out what was happening. I completely re-made the images at a lower quality but even then it wouldn’t work. After being stuck for many days, I sent a message on the Rebble Alliance Discord server asking for any advice. The server is filled with many great developers who have been doing this much longer than I have. After some back and forward, we figured out what the issue was. Some point during the development of the Pebble SDK, they updated the way resources were loaded. The system they used made the Aplite platform prioritize memory efficiency when loading images, which meant they were loaded in a way that made it faster to load in memory. This was done to better accommodate Aplite’s slower memory. However, in that process, the size of each image ever so slightly increased, but when that process is done over 200 times, it causes everything to balloon in size. The solution was to simply add an attribute that told the compiler to prioritize storage efficiency over memory efficiency. Since we were only loading the images one at a time, the memory efficiency loss was not perceptible. This issue alone cost me many days of work time which is quite frustrating, but that’s part of the process. Huge thanks to the Rebble Alliance Discord for helping diagnose the problem, otherwise the project would have ended there.
												<br>
												<br>
												With all the images able to be loaded, the final step was to actually create a flashcard. Each card has an image and a text component attached to them. I did a lot of experimenting with different approaches to best create the cards. I tried making all the cards manually and then selecting them based on what the user chose, but I was getting some memory errors when I essentially loaded all the cards at once. I had to rethink my strategy a few times, but I eventually came up with a system that could load the cards probably and much more efficiently. With that added, the core functionality of the app was finished and I moved onto polishing and testing to make sure everything functioned properly on each watch model.
												<br>
												<br>
												Once I finished all my testing, I was ready to publish to the appstore. I created all the images and such needed for the store page and published it. Like my last Pebble project, this was a lot of work and it was quite the learning experience working through all the issues. But I’m quite happy with how it turned out and I do plan to use it while I’m practicing my Japanese.
											</p>
											<h3>Status</h3>
											<p>
												This watchapp is considered complete. I will consider updating it if someone reports a bug or asks for a specific feature, but otherwise it is finished. It is avaiable to download from the Rebble appstore which can be accessed from the Pebble app on mobile or the link on this page alongside the GitHub repository.
											</p>										
											<h3>Images</h3>
											<img src="../images/pebble/koishi1.gif" alt="Flashcard Screen Gif" id="modalImg"/>
											<img src="../images/pebble/koishi2.png" alt="Koishi Main Menu" id="modalImg"/>
											<img src="../images/pebble/koishi3.png" alt="Koishi Deck Settings Menu" id="modalImg"/>
											<img src="../images/pebble/koishi4.png" alt="Koishi Kana Setup Menu" id="modalImg"/>
											<img src="../images/pebble/koishi5.png" alt="Koishi Presets" id="modalImg"/>
											
											
										</article>
								</div>

								<!-- Sidebar -->
								<div id="sidebar" class="col-4 col-12-medium">

									<!-- Highlights -->
										<section>
											<ul class="divided">
												<!--Banner-->
												<li>
													<article class="box highlight">
														<img src="../images/pebble/koishi_banner.png" alt="Pebble Banner" style="border-radius: 5px">
													</article>
												</li>
												<li>
													<!-- Basic Info -->
													<article class="box highlight">
														<header>
															<h3>Info</h3>
														</header>
														<p><strong>Name: </strong>Koishi - Japanese Kana Flashcards<br><strong>Year: </strong>2023<br><strong>Contributors: </strong> Andy Villasmil<br><strong>Made with: </strong>C, JavaScript, JSON<br><strong>Development Time:</strong> 3 weeks</p>
													</article>
												</li>
												<li>
													<!-- GitHub -->
													<article class="box highlight">
														<header>
															<h3><a href="#koishi">GitHub Repository & Download</h3>
														</header>
														<a href="https://github.com/robinfire110/koishi-japanese-flashcards" class="image left" target="_blank"><img src="../images/github.png" alt="GitHub Logo" style="max-width: 10em;"/></a>
														<p>Click the logo to go to the GitHub Repository. Click below to be taken to the Rebble Appstore page.</p>
														<ul class="actions">
															<li><a href="https://apps.rebble.io/en_US/application/64177b1e419fd9053e31a7b5" class="button icon solid fa-clock" target="_blank">Rebble App Store</a></li>
														</ul>
													</article>
												</li>
											</ul>
										</section>

									</div>
						</div>
					</div>
				</section>

			<!-- Footer -->
			<section id="footer">
				<div class="container">
					<header>
						<h2><strong>Contact</strong></h2>
					</header>
					<br>
					<div class="row">
						<ul class="icons">
							<li class="icon solid fa-envelope" style="padding-top: 0; padding-bottom: 1em"><a href="mailto:webmaster@example.com" target="_blank">aevillas@uncg.edu</a></li>
							<li class="icon brands fa-github" style="padding-top: 0; padding-bottom: 1em"><a href="https://github.com/robinfire110" target="_blank">robinfire110</a></li>
							<li class="icon brands fa-linkedin" style="padding-top: 0; padding-bottom: 1em"><a href="https://www.linkedin.com/in/andyvillasmil/" target="_blank">andyvillasmil</a></li>
						</ul>
					</div>
					
				</div>
				<div id="copyright" class="container">
					<ul class="links">
						<li>&copy; Andy Villasmil. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</div>
			</section>

			<!-- The Modal -->
			<div id="myModal" class="modal">

				<!-- The Close Button -->
				<span class="close">&times;</span>
			
				<!-- Modal Content (The Image) -->
				<img class="modal-content" id="img01">
			
				<!-- Modal Caption (Image Text) -->
				<div id="caption"></div>
			</div>
		</div>

		<!-- Scripts -->
		<script src="../assets/js/jquery.min.js"></script>
		<script src="../assets/js/jquery.dropotron.min.js"></script>
		<script src="../assets/js/browser.min.js"></script>
		<script src="../assets/js/breakpoints.min.js"></script>
		<script src="../assets/js/util.js"></script>
		<script src="../assets/js/main.js"></script>

	</body>
</html>